# 关于域名

## 记录类型

域名解析类型主要有以下几项

### A

将域名指向一个IPv4地址（例如：10.10.10.10），需要增加A记录

### CNAME

如果将域名指向一个域名，实现与被指向域名相同的访问效果，需要增加CNAME记录

### MX

建立电子邮箱服务，将指向邮件服务器地址，需要设置MX记录

### NS记录

域名解析服务器记录，如果要将子域名指定某个域名服务器来解析，需要设置NS记录

### TXT

可任意填写（可为空），通常用做SPF记录（反垃圾邮件）使用

### AAAA

将主机名（或域名）指向一个IPv6地址（例如：ff03:0:0:0:0:0:0:c1），需要添加AAAA记录

### SRV

记录了哪台计算机提供了哪个服务。格式为：服务的名字.协议的类型（例如：_example-server._tcp）

### 显性URL

将域名指向一个http(s)协议地址，访问域名时，自动跳转至目标地址

例如：将 www.net.cn 显性转发到 www.hichina.com 后，访问 www.net.cn 时，地址栏显示的地址为：www.hichina.com

### 隐性URL

与显性URL类似，但隐性转发会隐藏真实的目标地址

例如：将 www.net.cn 隐性转发到 www.hichina.com 后，访问 www.net.cn 时，地址栏显示的地址仍然为：www.net.cn

隐性URL记录对网站排名不利，如非必要，建议设置成显示URL

## 主机记录

主机记录就是域名前缀，常见用法有以下几项

### www

将域名解析为www.example.com，填写www

@ 

将域名解析为example.com（不带www），填写@或者不填写

### mail

将域名解析为mail.example.com，通常用于解析邮箱服务器

### *
泛解析，所有子域名均被解析到统一地址（除单独设置的子域名解析）

二级域名

mail.example.com 或 blog.example.com，填写 mail 或 blog

### 手机网站

m.example.com，填写m

## 注意事项

### A记录与CNAME记录

A记录是把一个域名解析到一个IP地址，而CNAME记录是把域名解析到另外一个域名，而这个域名最终会指向一个A记录，在功能实现在上A记录与CNAME记录没有区别

CNAME记录在做IP地址变更时要比A记录方便。CNAME记录允许将多个名字映射到同一台计算机，当有多个域名需要指向同一服务器IP，此时可以将一个域名做A记录指向服务器IP，然后将其他的域名设置为CNAME记录，映射到A记录的域名上。

这样处理的好处是，当服务器IP地址变更时，只需要更改A记录的那个域名到新IP上，其它做别名的域名会自动更改到新的IP地址上，而不必对每个域名做更改

### A记录与AAAA记录

二者都是指向一个IP地址，但对应的IP版本不同。

A记录指向IPv4地址，AAAA记录指向IPv6地址。

AAAA记录是A记录的升级版本。

### IPv4与IPv6

IPv4，是互联网协议（Internet Protocol，IP）的第四版，也是第一个被广泛使用的版本，是构成现今互联网技术的基础协议。

IPv4 的下一个版本就是IPv6，在将来将取代，目前被广泛使用的IPv4。

IPv4中规定IP地址长度为32位（按TCP/IP参考模型划分) ，即有2^32-1个地址。

IPv6的提出最早是为了解决，随着互联网的迅速发展IPv4地址空间将被耗尽的问题。

为了扩大地址空间，IPv6将IP地址的长度由32位增加到了128位。

在IPv6的设计过程中除了一劳永逸地解决了地址短缺问题以外，还解决了IPv4中的其它问题，如：端到端IP连接、服务质量（QoS）、安全性、多播、移动性、即插即用等。

### TTL值

TTL－生存时间(Time-To-Live)，就是一条域名解析记录在 DNS 服务器中的存留时间。

当各地的 DNS 服务器接受到解析请求时，就会向域名指定的 NS 服务器发出解析请求从而获得解析记录；在获得这个记录之后，记录会在 DNS 服务器中保存一段时间，这段时间内如果再接到这个域名的解析请求，DNS 服务器将不再向 NS 服务器发出请求，而是直接返回刚才获得的记录；而这个记录在 DNS 服务器上保留的时间，就是 TTL 值。

TTL的时间长度单位是秒，一般为3600秒。比如：在访问 ilovelan.com 时，如果在DNS服务器的缓存中没有该记录，就会向某个NS服务器发出请求，获得该记录后，该记录会在DNS服务器上保存TTL的时间长度，在TTL有效期内访问 ilovelan.com ，DNS服务器会直接缓存中返回刚才的记录。

关于TTL值应用说明

**1、增大 TTL 值，以节约域名解析时间，给网站访问加速**

一般情况下，域名的各种记录是极少更改的，很可能几个月、几年内都不会有什么变化。我们完全可以增大域名记录的 TTL 值让记录在各地 DNS 服务器中缓存的时间加长，这样在更长的一段时间内，我们访问这个网站时，本地 ISP 的 DNS 服务器就不需要向域名的 NS 服务器发出解析请求，而直接从缓存中返回域名解析记录。

**2、减小 TTL 值，以减少更换空间时的不可访问时间**

更换空间 99.9% 会有 DNS 记录更改的问题，因为缓存的问题，新的域名记录在有的地方可能生效了，但在有的地方可能等上一两天甚至更久才生效。结果就是有的人可能访问到了新服务器，有的人访问到了旧服务器。仅仅是访问的话，这也不是什么大问题，但如果涉及到了邮件发送，这个就有点麻烦了，说不定哪封重要信件就被发送到了那已经停掉的旧服务器上。

为了尽可能的减小这个各地的解析时间差，合理的做法是：

1）先查看域名当前的 TTL 值，我们假定是 1 天。

2）修改 TTL 值为可设定的最小值，可能的话，建议为 1 分钟，就是 60。

3）等待一天，保证各地的 DNS 服务器缓存都过期并更新了记录。

4）设置修改新记录，这个时候各地的 DNS 就能以最快的速度更新到新的记录。

5）确认各地的 DNS 已经更新完成后，把 TTL 值设置成您想要的值，TTL=60 还是太小了点。

### 子域名级别

定义 .com、.net、.cn、.org 等为顶级域。

定义 example.com、example.net、example.cn 等为一级域名。

定义 www.example.com、news.example.net、www.example.cn 等为二级域名，即一级域名的子域名，该子域名为二级子域名。

以此类推，子域名级别定义如下：

三级子域名为：a.www.example.com 或者 a.www.example.net

四级子域名为：b.a.www.example.com 或者 b.a.www.example.net

五级子域名为：c.b.a.www.example.com 或者 c.b.a.www.example.net